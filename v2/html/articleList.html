<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文章列表</title>
    <script src="http://xiaoqiao.com:9000/v2/js/JQuery-1.9.1/jquery-1.9.1.js"></script>
    <link href="../css/index.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="left"></div>
<div id="right">
    <p id="articleList">文章列表</p>

    <div id="articlesList"></div>
</div>


</body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        //todo 安全验证
        //todo 分页
        var url = "http://www.xiaoqiao.com:9000/controller/articleController.php?type=getArticle";
        $.get(url, function (res) {
            var jsonRes = JSON.parse(res);
            $.each(jsonRes, function (i, item) {
                var items = JSON.stringify(item);
                $("#articlesList").append(
                        "<div id='articlesList1'>文章" + item.id + "</div>" +
                        "<div id='listRight'><div id='articlesList2'>" + item.title + "</div>" +
                        "<div id='articlesList3'>" + item.content + "</div><span onclick='commentClick(" + items + ")' id='commentSubmit'>评论</span></div>"
                );

            });
        })
    });

    function commentClick(cur) {
        var uid = cur.id;
//        alert(cur.uid);
//        var content = $(cur).prev().text();
//        var title = $(cur).prev().prev().text();
//        var uid = $(cur).prev().prev().prev().text();
        location.href = "http://www.xiaoqiao.com:9000/v2/html/commentList.html?aid=" + uid;

    }
</script>